(this["webpackJsonpsalad-orders"]=this["webpackJsonpsalad-orders"]||[]).push([[0],{24:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(7),i=n.n(a),s=(n(24),n(6)),d=n(2),o=n(1);var l=function(){var e="/salad-orders/"===Object(d.e)().pathname;return Object(o.jsxs)("section",{children:[Object(o.jsx)("h1",{children:"The salad boutique"}),e&&Object(o.jsxs)("div",{className:"welcome",children:[Object(o.jsx)("h2",{children:"Welcome to the salad boutique!"}),Object(o.jsx)("p",{children:"If you're interested in a delicious and nutritious salad - you've come to the right place!"}),Object(o.jsx)("p",{children:"Click on the 'order salad' link to choose some of the most breathtaking ingredients for the salad of your dreams"}),Object(o.jsx)(s.b,{className:"link-button",to:"/salad-orders/ingredients",children:"Order Salad"})]})]})},u=n(3),j=n(9),h=n.n(j),b=n(13),O=n(11);function m(){return x.apply(this,arguments)}function x(){return(x=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("salad.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=Object(O.b)("order/getIngredients",Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return t=e.sent,e.abrupt("return",t.items);case 4:case"end":return e.stop()}}),e)})))),v=Object(O.c)({name:"order",initialState:{ingredients:[],status:"idle",user:[],showModal:!1},reducers:{updateQuantity:function(e,t){var n=t.payload.ingredient,r=t.payload.quantity;if(void 0!==n&&void 0!==r){var c=e.ingredients.findIndex((function(e){return e.name===n}));e.ingredients[c].quantity=r}},resetOrder:function(e){e.ingredients=e.ingredients.map((function(e){return delete e.quantity,e})),e.user=[],e.showModal=!1},setUserDetails:function(e,t){e.user={name:t.payload.name,email:t.payload.email,note:t.payload.note}},toggleModal:function(e){e.showModal=!e.showModal}},extraReducers:function(e){e.addCase(f.pending,(function(e){e.status="loading"})).addCase(f.fulfilled,(function(e,t){e.status="idle",e.ingredients=t.payload}))}}),p=v.actions,g=p.updateQuantity,y=p.resetOrder,N=p.setUserDetails,k=p.toggleModal,w=function(e){return e.order.ingredients},C=function(e){return e.order.user},q=function(e){return e.order.status},S=function(e){return e.order.showModal},M=v.reducer;function E(){var e=Object(u.c)(w),t=Object(u.c)(q),n=Object(u.b)();return Object(r.useEffect)((function(){e.length>0||n(f())}),[n,e]),Object(o.jsx)("div",{children:"loading"===t?Object(o.jsx)("div",{className:"loading"}):Object(o.jsx)("ul",{className:"order-list",children:(null===e||void 0===e?void 0:e.length)>0&&e.map((function(e){var t=e.name;return Object(o.jsxs)("li",{className:"order-item",children:[Object(o.jsx)("span",{children:t}),Object(o.jsx)("input",{type:"number",min:"0",onChange:function(e){return n(g({ingredient:t,quantity:Number(e.target.value)}))}})]},t)}))})})}var I=function(){var e=Object(u.c)(w);return Object(o.jsxs)("section",{children:[Object(o.jsx)("h2",{children:"Ingredients"}),Object(o.jsx)("p",{children:"Please enter how many of each ingredient you would like for your delicious salad"}),Object(o.jsx)(E,{}),e.some((function(e){return e.quantity}))&&Object(o.jsx)(s.b,{className:"link-button",to:"/salad-orders/checkout",children:"Proceed to Checkout"})]})};var F=function(){var e,t=Object(u.c)(w),n=0;return Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Ingredient"}),Object(o.jsx)("th",{children:"Quantity"}),Object(o.jsx)("th",{children:"Price"})]})}),Object(o.jsx)("tbody",{children:(null===t||void 0===t?void 0:t.length)>0&&t.filter((function(e){return e.quantity>0})).map((function(t){var r=t.name,c=t.price,a=t.quantity;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{className:"ingredient",children:r}),Object(o.jsx)("td",{className:"quantity",children:a}),Object(o.jsx)("td",{className:"price",children:(e=c*a,n+=e,e.toFixed(2))})]},r)}))}),Object(o.jsx)("tfoot",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Total Price:"}),Object(o.jsx)("td",{children:n.toFixed(2)})]})})]})},P=n(19);var R=function(){var e=Object(r.useState)(!1),t=Object(P.a)(e,2),n=t[0],c=t[1],a=Object(r.useRef)(),i=Object(r.useRef)(),s=Object(r.useRef)(),d=Object(u.b)();function l(){""!==a.current.value&&/^\S+@\S+\.\S+$/.test(i.current.value)?c(!0):c(!1)}return Object(o.jsxs)("form",{className:"checkout-form",onSubmit:function(e){e.preventDefault(),d(N({name:a.current.value,email:i.current.value,note:s.current.value})),d(k())},children:[Object(o.jsxs)("div",{className:"form-field",children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(o.jsx)("input",{type:"text",id:"name",ref:a,onChange:l})]}),Object(o.jsxs)("div",{className:"form-field",children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(o.jsx)("input",{type:"email",id:"email",ref:i,onChange:l})]}),Object(o.jsxs)("div",{className:"form-field text-area",children:[Object(o.jsx)("label",{htmlFor:"note",children:"Additional Notes:"}),Object(o.jsx)("textarea",{placeholder:"What's on your mind?",id:"note",ref:s,onChange:l})]}),Object(o.jsx)("button",{className:"btn-primary",disabled:!n,children:"Order"})]})};var W=function(e){var t=document.createElement("div");return t.classList.add("modal"),Object(r.useEffect)((function(){var e=document.getElementById("modal-root");return e.appendChild(t),function(){e.removeChild(t)}}),[t]),i.a.createPortal(e.children,t)};var B=function(){var e,t=Object(u.c)(C),n=Object(u.c)(S),r=Object(u.b)();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Checkout"}),Object(o.jsxs)("div",{className:"checkout",children:[Object(o.jsx)(F,{}),Object(o.jsx)(R,{})]}),n&&Object(o.jsx)(W,{children:Object(o.jsxs)("section",{className:"modal-content",children:[Object(o.jsx)("header",{children:Object(o.jsx)("h2",{children:"Order Summary"})}),Object(o.jsxs)("div",{children:["Name: ",t.name]}),Object(o.jsxs)("div",{children:["Email: ",t.email]}),(null===(e=t.note)||void 0===e?void 0:e.length)>0&&Object(o.jsxs)("div",{children:["Note: ",t.note]}),Object(o.jsx)(F,{}),Object(o.jsx)("div",{children:"Thanks for shopping at the salad boutique!"}),Object(o.jsx)("div",{children:"Your delivery is on the way!"}),Object(o.jsx)(s.b,{className:"link-button",onClick:function(){return r(y())},to:"/salad-orders/",children:"Close"})]})})]})};n(32);var D=function(){return Object(o.jsx)(s.a,{children:Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(d.a,{path:"/salad-orders",children:Object(o.jsx)(l,{})}),Object(o.jsx)(d.a,{path:"/salad-orders/ingredients",children:Object(o.jsx)(I,{})}),Object(o.jsx)(d.a,{path:"/salad-orders/checkout",children:Object(o.jsx)(B,{})})]})})},Q=Object(O.a)({reducer:{order:M}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(u.a,{store:Q,children:Object(o.jsx)(D,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.665555aa.chunk.js.map